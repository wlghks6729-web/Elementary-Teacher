<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ë‘ ìë¦¬ Ã· í•œ ìë¦¬ ì±—ë´‡í˜• íŠœí„°</title>
    <meta name="description" content="3í•™ë…„ì„ ìœ„í•œ ë‘ ìë¦¬ Ã· í•œ ìë¦¬ ë‚˜ëˆ—ì…ˆ ì±—ë´‡í˜• í•™ìŠµ ì•±" />
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <!-- Tailwind CSS (CDN runtime) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React 18 UMD + Babel Standalone for JSX in-browser -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      body { min-height: 100vh; }
    </style>
  </head>
  <body class="bg-slate-50 text-slate-900">
    <div class="max-w-5xl mx-auto px-4 py-8">
      <div class="mb-4 flex items-center justify-between">
        <h1 class="text-2xl md:text-3xl font-bold">ë‘ ìë¦¬ Ã· í•œ ìë¦¬ ì±—ë´‡í˜• íŠœí„°</h1>
        <a href="README.html" class="text-sm underline">ì‚¬ìš© ì•ˆë‚´</a>
      </div>
      <div id="app"></div>
      <footer class="mt-10 text-xs text-slate-500">
        Â© 2025 êµì‹¤ìš© í•™ìŠµ íŠœí„° â€¢ GitHub Pages/Netlify/Vercelë¡œ ììœ  ë°°í¬ ê°€ëŠ¥
      </footer>
    </div>

    <script type="text/babel">
      const { useMemo, useState } = React;

      function makeProblem() {
        let divisor = Math.floor(Math.random() * 8) + 2; // 2~9
        let dividend = Math.floor(Math.random() * 90) + 10; // 10~99
        if (Math.random() < 0.3) {
          const q = Math.floor(Math.random() * 9) + 1; // 1~9
          dividend = divisor * (Math.floor(Math.random() * 9) + 1) + (Math.random() < 0.5 ? 0 : Math.floor(Math.random() * (divisor - 1)));
        }
        return { dividend, divisor };
      }

      function solve(dividend, divisor) {
        const tens = Math.floor(dividend / 10);
        const ones = dividend % 10;
        const tensEach = Math.floor(tens / divisor);
        const tensRem = tens % divisor;
        const onesTotal = ones + tensRem * 10;
        const onesEach = Math.floor(onesTotal / divisor);
        const onesRem = onesTotal % divisor;
        const quotient = tensEach * 10 + onesEach;
        const remainder = onesRem;
        return { tens, ones, tensEach, tensRem, onesTotal, onesEach, onesRem, quotient, remainder };
      }

      const Pill = ({ children }) => (
        <span className="inline-block rounded-full px-3 py-1 text-sm border shadow-sm bg-white">{children}</span>
      );

      const StepCard = ({ title, children, accent=false }) => (
        <div className={
          "rounded-2xl p-4 md:p-5 shadow border " +
          (accent ? "bg-blue-50 border-blue-200" : "bg-white border-slate-200")
        }>
          <div className="font-semibold mb-2 flex items-center gap-2">
            <div className="w-2 h-2 rounded-full bg-current" /> {title}
          </div>
          <div className="prose prose-sm max-w-none">{children}</div>
        </div>
      );

      const NumberInput = ({ value, onChange, placeholder }) => (
        <input
          inputMode="numeric"
          className="w-24 md:w-28 rounded-xl border px-3 py-2 text-center text-lg bg-white border-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-400"
          value={value}
          placeholder={placeholder}
          onChange={(e)=>onChange(e.target.value.replace(/[^0-9]/g, ""))}
        />
      );

      function LongDivisionBoard({ dividend, divisor, q1, q2, rem, showAnswer }) {
        const s = solve(dividend, divisor);
        const q1Show = showAnswer ? Math.floor(s.quotient / 10) : q1;
        const q2Show = showAnswer ? s.quotient % 10 : q2;
        const rShow = showAnswer ? s.remainder : rem;

        return (
          <div className="inline-block p-3 rounded-2xl border bg-white border-slate-300">
            <div className="flex items-start gap-2">
              <div className="pt-2 text-lg">{divisor}</div>
              <div className="relative">
                <div className="pl-3 pr-2 pb-2 border-l-2 border-b-2 border-slate-700 text-2xl tracking-widest font-semibold min-w-[5ch] text-center">
                  {dividend}
                </div>
                <div className="absolute -top-3 left-[3.2rem] md:left-[3.6rem] text-xl font-semibold">
                  <span>{q1Show ?? "_"}</span>
                  <span>{q2Show ?? "_"}</span>
                </div>
              </div>
            </div>
            <div className="text-right text-sm mt-1">
              ë‚˜ë¨¸ì§€: <span className="font-semibold">{rShow ?? "_"}</span>
            </div>
          </div>
        );
      }

      function DivisionTutor() {
        const [{ dividend, divisor }, setProb] = useState(makeProblem());
        const s = useMemo(() => solve(dividend, divisor), [dividend, divisor]);

        const [tensEach, setTensEach] = useState("");
        const [onesEach, setOnesEach] = useState("");
        const [remainder, setRemainder] = useState("");
        const [showHints, setShowHints] = useState(false);
        const [teacherMode, setTeacherMode] = useState(false);

        const tensCorrect = tensEach !== "" && Number(tensEach) === s.tensEach;
        const onesCorrect = onesEach !== "" && Number(onesEach) === s.onesEach;
        const remCorrect = remainder !== "" && Number(remainder) === s.remainder;
        const allCorrect = tensCorrect && onesCorrect && remCorrect;

        function next() {
          const np = makeProblem();
          setProb(np);
          setTensEach(""); setOnesEach(""); setRemainder("");
          setShowHints(false);
        }

        return (
          <div className="grid gap-4">
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-3">
                <Pill>í”¼ì œìˆ˜: <b>{dividend}</b></Pill>
                <Pill>ì œìˆ˜: <b>{divisor}</b></Pill>
                <Pill>ë¬¸ì œ ìœ í˜•: ë‚˜ë¨¸ì§€ {s.remainder === 0 ? 'ì—†ìŒ' : 'ìˆìŒ'}</Pill>
              </div>
              <label className="flex items-center gap-2 text-sm cursor-pointer select-none">
                <input type="checkbox" checked={teacherMode} onChange={(e)=>setTeacherMode(e.target.checked)} />
                êµì‚¬ìš© í’€ì´ í‘œì‹œ
              </label>
            </div>

            <div className="flex flex-wrap items-center gap-4">
              <LongDivisionBoard
                dividend={dividend}
                divisor={divisor}
                q1={tensEach === "" ? undefined : Number(tensEach)}
                q2={onesEach === "" ? undefined : Number(onesEach)}
                rem={remainder === "" ? undefined : Number(remainder)}
                showAnswer={teacherMode}
              />
              <button className="rounded-2xl px-4 py-2 border shadow bg-white hover:bg-slate-50" onClick={next}>ğŸ”„ ë‹¤ìŒ ë¬¸ì œ</button>
              <button className="rounded-2xl px-4 py-2 border shadow bg-white hover:bg-slate-50" onClick={()=>setShowHints(v=>!v)}>
                ğŸ’¡ íŒíŠ¸ {showHints ? "ìˆ¨ê¸°ê¸°" : "ë³´ê¸°"}
              </button>
            </div>

            <StepCard title="1) ì‹­ëª¨í˜• ë‚˜ëˆ„ê¸°: â€˜ì‹­â€™ì€ ëª‡ ê°œì”© ì¤„ ìˆ˜ ìˆì„ê¹Œìš”?" accent>
              <p>
                {dividend}ì€(ëŠ”) <b>{s.tens}ì‹­</b>ê³¼ <b>{s.ones}ì¼</b>ë¡œ ì´ë£¨ì–´ì ¸ ìˆì–´ìš”. {divisor}ëª…ì—ê²Œ ê³µí‰í•˜ê²Œ ë‚˜ëˆ ì¤„ ë•Œ,
                <b> ì‹­ëª¨í˜•ì€ ê°ì ëª‡ ê°œì”©</b> ì¤„ ìˆ˜ ìˆì„ê¹Œìš”?
              </p>
              <div className="flex items-center gap-2 mt-2">
                <NumberInput value={tensEach} onChange={setTensEach} placeholder="?" />
                <span>ê°œì”©</span>
                {tensEach !== "" && (
                  <span className={tensCorrect ? "text-green-600" : "text-red-600"}>
                    {tensCorrect ? "ì •ë‹µ!" : `ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš” (íŒíŠ¸: ${s.tens} Ã· ${divisor})`}
                  </span>
                )}
              </div>
              {showHints && (
                <div className="mt-2 text-sm text-slate-700">
                  íŒíŠ¸: {s.tens}ì„(ë¥¼) {divisor}ë¡œ ë‚˜ëˆ„ë©´, ê°ì <b>{Math.floor(s.tens/divisor)}</b>ì‹­ì”© ê°–ê³  <b>{s.tensRem}</b>ì‹­ì´ ë‚¨ì•„ìš”.
                </div>
              )}
              {teacherMode && <div className="mt-2 text-sm opacity-80">ì •ë‹µ: ê°ì <b>{s.tensEach}</b>ì‹­ì”©, ë‚¨ì€ ì‹­ëª¨í˜• <b>{s.tensRem}</b>ì‹­</div>}
            </StepCard>

            <StepCard title="2) ë‚¨ì€ ì‹­ëª¨í˜•ì„ ì¼ëª¨í˜•ìœ¼ë¡œ ë°”ê¾¸ê¸° (êµê³¼ì„œ ì—°ê²°)">
              <p>
                ë‚¨ì€ <b>{s.tensRem}ì‹­</b>ì€ <b>{s.tensRem * 10}ì¼</b>ë¡œ ë°”ê¿€ ìˆ˜ ìˆì–´ìš”. ê·¸ëŸ¬ë©´ ì²˜ìŒì— ìˆë˜ ì¼ <b>{s.ones}ì¼</b>ê³¼ í•©ì³ì„œ
                <b> {s.onesTotal}ì¼</b>ì´ ë©ë‹ˆë‹¤.
              </p>
              {teacherMode && <div className="text-sm opacity-80">ì—°ê²°: í‘œì¤€ ì•Œê³ ë¦¬ì¦˜ì˜ â€˜ë°›ì•„ë‚´ë¦¼(ë‚´ë ¤ì“°ê¸°)â€™ê³¼ ì˜ë¯¸ê°€ ê°™ìŠµë‹ˆë‹¤.</div>}
            </StepCard>

            <StepCard title="3) ì¼ëª¨í˜• ë‚˜ëˆ„ê¸°: ì´ì œ ì¼ì€ ëª‡ ê°œì”© ì¤„ ìˆ˜ ìˆì„ê¹Œìš”?" accent>
              <div className="flex items-center gap-2">
                <span>{s.onesTotal} Ã· {divisor} =</span>
                <NumberInput value={onesEach} onChange={setOnesEach} placeholder="?" />
                <span>ê°œì”©</span>
                {onesEach !== "" && (
                  <span className={onesCorrect ? "text-green-600" : "text-red-600"}>
                    {onesCorrect ? "ì •ë‹µ!" : `ë‹¤ì‹œ ì‹œë„í•´ìš” (íŒíŠ¸: ${s.onesTotal} Ã· ${divisor})`}
                  </span>
                )}
              </div>
              {showHints && (
                <div className="mt-2 text-sm text-slate-700">
                  íŒíŠ¸: {s.onesTotal}ì„(ë¥¼) {divisor}ë¡œ ë‚˜ëˆ„ë©´, ê°ì <b>{Math.floor(s.onesTotal/divisor)}</b>ê°œì”© ê°–ê³  <b>{s.onesRem}</b>ê°œê°€ ë‚¨ì•„ìš”.
                </div>
              )}
              {teacherMode && <div className="mt-2 text-sm opacity-80">ì •ë‹µ: ê°ì <b>{s.onesEach}</b>ê°œ, ë‚¨ì€ ì¼ëª¨í˜• <b>{s.onesRem}</b>ê°œ</div>}
            </StepCard>

            <StepCard title="4) ëª«ê³¼ ë‚˜ë¨¸ì§€ ì •ë¦¬í•˜ê¸° (í‘œì¤€ ì•Œê³ ë¦¬ì¦˜)">
              <div className="flex flex-wrap items-center gap-3">
                <Pill>ëª«(ì‹­ì˜ ìë¦¬): <b>{tensEach === "" ? "_" : tensEach}</b></Pill>
                <Pill>ëª«(ì¼ì˜ ìë¦¬): <b>{onesEach === "" ? "_" : onesEach}</b></Pill>
                <Pill>ë‚˜ë¨¸ì§€: <NumberInput value={remainder} onChange={setRemainder} placeholder="?" /></Pill>
              </div>
              <div className="mt-3">
                <LongDivisionBoard
                  dividend={dividend}
                  divisor={divisor}
                  q1={tensEach === "" ? undefined : Number(tensEach)}
                  q2={onesEach === "" ? undefined : Number(onesEach)}
                  rem={remainder === "" ? undefined : Number(remainder)}
                  showAnswer={teacherMode}
                />
              </div>
              {remainder !== "" && (
                <div className={"mt-2 " + (remCorrect ? 'text-green-600' : 'text-red-600')}>
                  {remCorrect ? "ì •ë‹µì´ì—ìš”!" : `ë‹¤ì‹œ ìƒê°í•´ë´ìš” (íŒíŠ¸: ë‚¨ì€ ì¼ëª¨í˜•ì€ ${s.onesRem}ê°œ)`}
                </div>
              )}
              {teacherMode && <div className="mt-2 text-sm opacity-80">ì •ë‹µ: ëª« <b>{s.quotient}</b>, ë‚˜ë¨¸ì§€ <b>{s.remainder}</b></div>}
            </StepCard>

            <div className="flex flex-wrap gap-2 items-center">
              <button onClick={next} className="rounded-2xl px-4 py-2 border shadow bg-white hover:bg-slate-50">ğŸ” ìƒˆ ë¬¸ì œ ë§Œë“¤ê¸°</button>
              <button onClick={()=>{{
                /* ì±„ìš°ê¸° */
              }}} className="hidden"></button>
              <button onClick={()=>{
                /* í•™ìŠµ ìƒíƒœ ìë™ ì±„ìš°ê¸° */
                document.querySelectorAll('input').forEach(()=>{});
              }} className="hidden"></button>
              <button
                onClick={()=>{
                  const s2 = solve(dividend, divisor);
                  alert(`ì •ë‹µ í™•ì¸\n- ëª«: ${s2.quotient}\n- ë‚˜ë¨¸ì§€: ${s2.remainder}\n(êµì‚¬ìš© ëª¨ë“œì—ì„œ í™”ë©´ì—ë„ í‘œì‹œë¼ìš”)`);
                }}
                className="rounded-2xl px-4 py-2 border shadow bg-white hover:bg-slate-50"
              >ğŸ‘€ ì •ë‹µ ê°„ë‹¨ í™•ì¸</button>
              <button
                onClick={()=>{
                  const s2 = solve(dividend, divisor);
                  const text = [
                    `ë¬¸ì œ: ${dividend} Ã· ${divisor}`,
                    `í’€ì´ê°œìš”: ì‹­ëª¨í˜• ${s2.tens} â†’ ê°ì ${s2.tensEach}ì‹­, ${s2.tensRem}ì‹­ ë‚¨ìŒ â†’ ì¼ë¡œ ë°”ê¾¸ì–´ ${s2.onesTotal}ì¼`,
                    `ì¼ëª¨í˜• ë‚˜ëˆ„ê¸° ê²°ê³¼: ê°ì ${s2.onesEach}ê°œ, ë‚¨ì€ ${s2.onesRem}ê°œ`,
                    `ì •ë‹µ: ëª« ${s2.quotient}, ë‚˜ë¨¸ì§€ ${s2.remainder}`
                  ].join("\n");
                  const blob = new Blob([text], {type: "text/plain;charset=utf-8"});
                  const url = URL.createObjectURL(blob);
                  const a = document.createElement("a");
                  a.href = url; a.download = "division-result.txt";
                  a.click();
                  URL.revokeObjectURL(url);
                }}
                className="rounded-2xl px-4 py-2 border shadow bg-white hover:bg-slate-50"
              >ğŸ“ í’€ì´ ìš”ì•½ ì €ì¥(.txt)</button>
            </div>

            <StepCard title="í™œë™ ëª©í‘œ & êµì‚¬ íŒ">
              <ul className="list-disc pl-5">
                <li>â€˜ì‹­ëª¨í˜•â†’ì¼ëª¨í˜•â€™ ë³€í™˜ì„ í†µí•´ í‘œì¤€ ì•Œê³ ë¦¬ì¦˜ì˜ ì˜ë¯¸ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.</li>
                <li>ì˜¤ê°œë…: ì‹­ëª¨í˜• ë‚˜ëˆ”ì—ì„œ ë‚¨ì€ ì‹­ì„ ë²„ë¦¬ëŠ” ê²½ìš° â†’ ë°˜ë“œì‹œ ì¼ë¡œ ë°”ê¿” í•©ì‚°í•˜ë„ë¡ ìœ ë„í•©ë‹ˆë‹¤.</li>
                <li>ì‹¬í™”: <em>ëª«ì´ í•œ ìë¦¬</em>ê°€ ë˜ëŠ” ê²½ìš°(ì˜ˆ: 18Ã·4)ë„ ìì—°íˆ ë‹¤ë£¨ì–´ì§‘ë‹ˆë‹¤.</li>
                <li>í‰ê°€: ê²°ê³¼ ì €ì¥(.txt)ìœ¼ë¡œ í˜•ì„±í‰ê°€ ê¸°ë¡ì„ ë‚¨ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
              </ul>
            </StepCard>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('app'));
      root.render(<DivisionTutor />);
    </script>
  </body>
</html>