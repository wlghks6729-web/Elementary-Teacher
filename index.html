
<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ë‘ ìë¦¬ Ã· í•œ ìë¦¬ ì±—ë´‡í˜• íŠœí„°</title>
    <meta name="description" content="3í•™ë…„ì„ ìœ„í•œ ë‘ ìë¦¬ Ã· í•œ ìë¦¬ ë‚˜ëˆ—ì…ˆ í•™ìŠµ ì•± (ìœ„ì¹˜ì  ê¸°ìˆ˜ë²• ê°•ì¡°)" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="bg-slate-50 text-slate-900">
    <div class="max-w-5xl mx-auto px-4 py-8">
      <div class="mb-4 flex items-center justify-between">
        <h1 class="text-2xl md:text-3xl font-bold">ë‘ ìë¦¬ Ã· í•œ ìë¦¬ ì±—ë´‡í˜• íŠœí„°</h1>
        <div class="flex items-center gap-4">
          <label class="text-sm flex items-center gap-2 cursor-pointer select-none">
            <input id="teacherMode" type="checkbox" />
            êµì‚¬ìš© í’€ì´ í‘œì‹œ
          </label>
          <a href="README.html" class="text-sm underline">ì‚¬ìš© ì•ˆë‚´</a>
        </div>
      </div>
      <div id="app"></div>
      <footer class="mt-10 text-xs text-slate-500">
        Â© 2025 í•™ìŠµ íŠœí„° â€¢ GitHub Pages/Netlify/Vercelë¡œ ììœ  ë°°í¬ ê°€ëŠ¥
      </footer>
    </div>

    <script type="text/babel">
      const { useMemo, useState } = React;

      function makeProblem() {
        let divisor = Math.floor(Math.random() * 8) + 2;
        let dividend = Math.floor(Math.random() * 90) + 10;
        if (Math.random() < 0.3) {
          dividend = divisor * (Math.floor(Math.random() * 9) + 1);
        }
        return { dividend, divisor };
      }

      function solve(dividend, divisor) {
        const tens = Math.floor(dividend / 10);
        const ones = dividend % 10;
        const tensEach = Math.floor(tens / divisor);
        const tensRem = tens % divisor;
        const onesTotal = ones + tensRem * 10;
        const onesEach = Math.floor(onesTotal / divisor);
        const onesRem = onesTotal % divisor;
        const quotient = tensEach * 10 + onesEach;
        const remainder = onesRem;
        return { tens, ones, tensEach, tensRem, onesTotal, onesEach, onesRem, quotient, remainder };
      }

      const Pill = ({ children }) => (
        <span className="inline-block rounded-full px-3 py-1 text-sm border shadow-sm bg-white">{children}</span>
      );

      const StepCard = ({ title, children, accent=false }) => (
        <div className={"rounded-2xl p-4 md:p-5 shadow border " + (accent ? "bg-blue-50 border-blue-200" : "bg-white border-slate-200")}>
          <div className="font-semibold mb-2 flex items-center gap-2">
            <div className="w-2 h-2 rounded-full bg-current" /> {title}
          </div>
          <div className="prose prose-sm max-w-none">{children}</div>
        </div>
      );

      const NumberInput = ({ value, onChange, placeholder }) => (
        <input
          inputMode="numeric"
          className="w-24 md:w-28 rounded-xl border px-3 py-2 text-center text-lg bg-white border-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-400"
          value={value}
          placeholder={placeholder}
          onChange={(e)=>onChange(e.target.value.replace(/[^0-9]/g, ""))}
        />
      );

      function LongDivisionBoard({ dividend, divisor, q, r, showAnswer, showProcess }) {
        const s = solve(dividend, divisor);
        const qShow = showAnswer ? s.quotient : q;
        const rShow = showAnswer ? s.remainder : r;

        return (
          <div className="inline-block p-3 rounded-2xl border bg-white border-slate-300">
            <div className="flex items-start gap-2">
              <div className="pt-2 text-lg">{divisor}</div>
              <div className="relative">
                <div className="text-xl font-semibold text-right mb-1">{qShow ?? "__"}</div>
                <div className="border-t-2 border-slate-700 w-full text-center text-2xl tracking-widest font-semibold">
                  {dividend}
                </div>
              </div>
            </div>
            <div className="text-right text-sm mt-1">ë‚˜ë¨¸ì§€: <span className="font-semibold">{rShow ?? "_"}</span></div>
            {showProcess && (
              <div className="mt-3 text-sm">
                <div>â‘  ì‹­ ë‚˜ëˆ„ê¸°: {Math.floor(dividend/10)}ì‹­ â†’ ê°ì {s.tensEach}ì‹­, ë‚¨ì€ {s.tensRem}ì‹­</div>
                <div>â‘¡ ë‚¨ì€ ì‹­ì„ ì¼ë¡œ: {s.tensRem}ì‹­ â†’ {s.tensRem*10}ì¼, í•©ì³ì„œ {s.ones}+{s.tensRem*10}={s.onesTotal}</div>
                <div>â‘¢ ì¼ ë‚˜ëˆ„ê¸°: {s.onesTotal} Ã· {divisor} â†’ ê°ì {s.onesEach}ê°œ, ë‚¨ì€ {s.onesRem}ê°œ</div>
              </div>
            )}
          </div>
        );
      }

      function DivisionTutor() {
        const [{ dividend, divisor }, setProb] = useState(makeProblem());
        const s = useMemo(() => solve(dividend, divisor), [dividend, divisor]);

        const [tensEach, setTensEach] = useState("");
        const [onesEach, setOnesEach] = useState("");
        const [remainder, setRemainder] = useState("");
        const [showHints, setShowHints] = useState(false);
        const [showProcess, setShowProcess] = useState(false);
        const [teacherMode, setTeacherMode] = useState(false);

        React.useEffect(() => {
          const el = document.getElementById("teacherMode");
          if (!el) return;
          const fn = () => setTeacherMode(el.checked);
          el.addEventListener("change", fn);
          return () => el.removeEventListener("change", fn);
        }, []);

        const tensCorrect = tensEach !== "" && Number(tensEach) === s.tensEach;
        const onesCorrect = onesEach !== "" && Number(onesEach) === s.onesEach;
        const remCorrect  = remainder !== "" && Number(remainder) === s.remainder;

        const qNow = (tensEach !== "" && onesEach !== "") ? Number(tensEach) * 10 + Number(onesEach) : undefined;

        function next() {
          setProb(makeProblem());
          setTensEach(""); setOnesEach(""); setRemainder("");
          setShowHints(false);
        }

        return (
          <div className="grid gap-4">
            <div className="text-xl font-bold text-center">ë¬¸ì œ: {dividend} Ã· {divisor}</div>

            <div className="flex flex-wrap items-center gap-3 justify-center">
              <Pill>ë‚˜ëˆ ì§€ëŠ” ìˆ˜: <b>{dividend}</b></Pill>
              <Pill>ë‚˜ëˆ„ëŠ” ìˆ˜: <b>{divisor}</b></Pill>
              <Pill>ë¬¸ì œ ìœ í˜•: ë‚˜ë¨¸ì§€ {s.remainder === 0 ? 'ì—†ìŒ' : 'ìˆìŒ'}</Pill>
            </div>

            <div className="flex flex-wrap items-start gap-4">
              <LongDivisionBoard
                dividend={dividend}
                divisor={divisor}
                q={qNow}
                r={remainder === "" ? undefined : Number(remainder)}
                showAnswer={teacherMode}
                showProcess={showProcess || teacherMode}
              />
              <div className="flex flex-col gap-2">
                <button className="rounded-2xl px-4 py-2 border shadow bg-white hover:bg-slate-50" onClick={next}>ğŸ”„ ë‹¤ìŒ ë¬¸ì œ</button>
                <button className="rounded-2xl px-4 py-2 border shadow bg-white hover:bg-slate-50" onClick={()=>setShowHints(v=>!v)}>ğŸ’¡ íŒíŠ¸ {showHints ? "ìˆ¨ê¸°ê¸°" : "ë³´ê¸°"}</button>
                <button className="rounded-2xl px-4 py-2 border shadow bg-white hover:bg-slate-50" onClick={()=>setShowProcess(v=>!v)}>ğŸ§­ ì¤‘ê°„ ê³¼ì • {showProcess ? "ìˆ¨ê¸°ê¸°" : "ë³´ê¸°"}</button>
              </div>
            </div>

            <StepCard title="1) ì‹­ì˜ ìë¦¬ ìˆ˜ë¥¼ ë¨¼ì € ë‚˜ëˆ„ì–´ ë³´ì•„ìš”" accent>
              <p>{dividend}ì€(ëŠ”) <b>{Math.floor(dividend/10)*10}</b>ê³¼ <b>{dividend%10}</b>ë¡œ ì´ë£¨ì–´ì ¸ ìˆì–´ìš”.</p>
              <div className="flex items-center gap-2 mt-2">
                <NumberInput value={tensEach} onChange={setTensEach} placeholder="?" />
                <span>ì‹­ì”©</span>
                {tensEach !== "" && (
                  <span className={tensCorrect ? "text-green-600" : "text-red-600"}>
                    {tensCorrect ? "ì •ë‹µ!" : `íŒíŠ¸: ${Math.floor(dividend/10)} Ã· ${divisor}`}
                  </span>
                )}
              </div>
            </StepCard>

            <StepCard title="2) ë‚¨ì€ 'ì‹­'ì„ 'ì¼'ë¡œ ë°”ê¾¸ì–´ìš” (ë°›ì•„ë‚´ë¦¼ ì—°ê²°)">
              <p>ë‚¨ì€ {s.tensRem}ì‹­ â†’ {s.tensRem*10}ì¼, ê¸°ì¡´ {s.ones}ì™€ í•©ì³ {s.onesTotal}ì¼</p>
            </StepCard>

            <StepCard title="3) ì´ì œ ì¼ì˜ ìë¦¬ ìˆ˜ë¥¼ ë‚˜ëˆ„ì–´ ë³´ì•„ìš”" accent>
              <div className="flex items-center gap-2">
                <span>{s.onesTotal} Ã· {divisor} =</span>
                <NumberInput value={onesEach} onChange={setOnesEach} placeholder="?" />
                <span>ì”©</span>
                {onesEach !== "" && (
                  <span className={onesCorrect ? "text-green-600" : "text-red-600"}>
                    {onesCorrect ? "ì •ë‹µ!" : `íŒíŠ¸: ${s.onesTotal} Ã· ${divisor}`}
                  </span>
                )}
              </div>
            </StepCard>

            <StepCard title="4) ëª«ê³¼ ë‚˜ë¨¸ì§€ë¥¼ ì •ë¦¬í•´ ë³´ì•„ìš” (í‘œì¤€ ì„¸ë¡œì…ˆ)">
              <div className="flex flex-wrap items-center gap-3">
                <Pill>ëª«(ì‹­ì˜ ìë¦¬): <b>{tensEach === "" ? "_" : tensEach}</b></Pill>
                <Pill>ëª«(ì¼ì˜ ìë¦¬): <b>{onesEach === "" ? "_" : onesEach}</b></Pill>
                <Pill>ë‚˜ë¨¸ì§€: <NumberInput value={remainder} onChange={setRemainder} placeholder="?" /></Pill>
              </div>
              {remainder !== "" && (
                <div className={"mt-2 " + (remCorrect ? "text-green-600" : "text-red-600")}>
                  {remCorrect ? "ì •ë‹µì´ì—ìš”!" : `íŒíŠ¸: ë‚¨ì€ ìˆ˜ëŠ” ${s.onesRem}`}
                </div>
              )}
            </StepCard>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById('app')).render(<DivisionTutor />);
    </script>
  </body>
</html>
